(this["webpackJsonpstar-wars"]=this["webpackJsonpstar-wars"]||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,s){e.exports={pagination:"Pagination_pagination__22Cz5",pageItem:"Pagination_pageItem__3g3Uz",active:"Pagination_active__36Y8r"}},function(e,t,s){e.exports={pageTitle:"List_pageTitle__2h1F5",listItem:"List_listItem__S9J4v",list:"List_list__20lAr",searchBar:"List_searchBar__1xast",noResult:"List_noResult__2Pids",error:"List_error__1XpdD"}},,function(e,t,s){e.exports={navigation:"MainNavigation_navigation__3pGDI",link:"MainNavigation_link__3WXxt",menu:"MainNavigation_menu__32K96"}},,,,function(e,t,s){e.exports={modal:"Modal_modal__3t5l6",backdrop:"Modal_backdrop__aqTZz"}},function(e,t,s){e.exports={itemLink:"ItemModal_itemLink__bqEXF",action:"ItemModal_action__wxKWz"}},,,function(e,t,s){e.exports={container:"Layout_container__dYy6P",main:"Layout_main__1SrPp"}},function(e,t,s){e.exports={loader:"Loader_loader__2IHo1",spinner:"Loader_spinner__3zLVK",spin:"Loader_spin__1oCPV"}},,,function(e,t,s){e.exports={card:"Card_card__3_GuF"}},,function(e,t,s){e.exports={main:"Main_main__2blDm"}},function(e,t,s){e.exports={action:"ListItem_action__QAPdL"}},,function(e,t,s){e.exports={noFound:"ItemsList_noFound__2p8CE",error:"ItemsList_error__7WfPe"}},,,,,function(e,t,s){},function(e,t,s){},,,,,,,function(e,t,s){"use strict";s.r(t);var i=s(1),c=s.n(i),n=s(28),r=s.n(n),a=(s(39),s(2)),o=(s(40),s(5)),l=s(13),j=s(3),h=s(12),d=s(29),u=s.n(d),b=s(0),p=function(e){return Object(b.jsx)("div",{className:u.a.card+" background-secondary",children:e.children})},O=s(21),f=s.n(O),x=function(e){return Object(b.jsx)(p,{children:Object(b.jsx)("div",{className:f.a.backdrop,children:Object(b.jsx)("div",{className:f.a.modal+" background-secondary",children:e.children})})})},v=s(22),m=s.n(v),g=function(e){var t=Object(i.useState)({}),s=Object(j.a)(t,2),c=s[0],n=s[1],r=Object(i.useState)(e.item),a=Object(j.a)(r,2),o=a[0],d=a[1],u=Object(i.useContext)(T);function p(e,t){u.fetchSWAPI(t).then((function(t){return n((function(s){var i=u.dataToObj(t);return i&&(void 0==s[e]&&(s[e]={}),s[e][i.id]=i),Object(l.a)({},s)}))})).catch((function(e){return console.log("getItemFromAPI error",e)}))}Object(h.useEffect)((function(){for(var e in n({}),o)if("id"!=e&&"url"!=e){var t=o[e];if(Array.isArray(t))for(var s=0;s<t.length&&s<5;s++)t[s].startsWith(u.apiUrl)&&p(e,t[s]);else"string"==typeof t&&t.startsWith(u.apiUrl)&&p(e,t)}}),[o]);var O=Object.entries(c).map((function(e){var t=Object(j.a)(e,2),s=t[0],i=t[1];return Object(b.jsxs)("p",{children:[s,":",Object.entries(i).map((function(e){var t=Object(j.a)(e,2),s=t[0],i=t[1];return Object(b.jsx)("a",{className:m.a.itemLink,onClick:function(e){return function(e,t){e.preventDefault(),d(t)}(e,i)},children:i.name},s)}))]},s)}));return Object(b.jsxs)(x,{children:[o.detailedInfo(),O.map((function(e){return e})),Object(b.jsxs)("div",{className:m.a.action,children:[Object(b.jsx)("button",{className:"btn-primary",onClick:u.closeModal,children:"Close"}),u.isFavorite(o)?Object(b.jsx)("button",{className:"removeFavorite btn btn-primary",onClick:function(){return u.removeFromFavorites(o)},children:"Remove from favorites"}):Object(b.jsx)("button",{className:"addFavorite btn btn-primary",onClick:function(){return u.addToFavorites(o)},children:"Add to favorites"})]})]})},_=s(8),y=s(9),k=function(){function e(t){Object(_.a)(this,e),this.type="films",t&&Object.assign(this,t),this.release_date=this.convertDate(this.release_date)}return Object(y.a)(e,[{key:"name",get:function(){return this.title}},{key:"paddingZeros",value:function(e){return("0"+e).slice(-2)}},{key:"convertDate",value:function(e){var t=Date.parse(e);if(isNaN(+t))return!1;var s=new Date(t);return"".concat(this.paddingZeros(s.getDay()),"-").concat(this.paddingZeros(s.getMonth()+1),"-").concat(s.getFullYear())}},{key:"shortInfo",value:function(){return Object(b.jsxs)("div",{children:[Object(b.jsxs)("h2",{children:[this.title," - Episode ",this.episode_id]}),this.release_date&&Object(b.jsx)("p",{children:this.release_date}),this.director&&Object(b.jsxs)("p",{children:["Director: ",this.director," - Producer: ",this.producer]})]})}},{key:"detailedInfo",value:function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:this.title}),Object(b.jsxs)("p",{children:["Director: ",this.director]}),Object(b.jsxs)("p",{children:["Producer: ",this.producer]}),Object(b.jsxs)("p",{children:["Episode: ",this.episode_id]}),this.release_date&&Object(b.jsxs)("p",{children:["Released on: ",this.release_date]}),Object(b.jsx)("p",{children:this.opening_crawl})]})}}]),e}(),S=function(){function e(t){Object(_.a)(this,e),this.speciesObjArr=[],this.type="people",t&&Object.assign(this,t)}return Object(y.a)(e,[{key:"shortInfo",value:function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:this.name}),Object(b.jsxs)("p",{children:["Birth year: ",this.birth_year]}),this.gender&&Object(b.jsxs)("p",{children:["Gender: ",this.gender]})]})}},{key:"detailedInfo",value:function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:this.name}),Object(b.jsxs)("p",{children:["Birth year: ",this.birth_year]}),this.eye_color&&Object(b.jsxs)("p",{children:["Eye color: ",this.eye_color]}),this.gender&&Object(b.jsxs)("p",{children:["Gender: ",this.gender]}),this.hair_color&&Object(b.jsxs)("p",{children:["Hair color: ",this.hair_color]}),Object(b.jsxs)("p",{children:["Height: ",this.height," cm"]}),Object(b.jsxs)("p",{children:["Mass: ",this.mass," kg"]}),Object(b.jsxs)("p",{children:["Skin color: ",this.skin_color]})]})}}]),e}(),N=function(){function e(t){Object(_.a)(this,e),this.type="planets",t&&Object.assign(this,t)}return Object(y.a)(e,[{key:"shortInfo",value:function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:this.name}),Object(b.jsxs)("p",{children:["Diameter: ",this.diameter," km"]}),Object(b.jsxs)("p",{children:["Population: ",this.population]}),Object(b.jsxs)("p",{children:["Climate: ",this.climate]})]})}},{key:"detailedInfo",value:function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:this.name}),Object(b.jsxs)("p",{children:["Diameter: ",this.diameter," km"]}),Object(b.jsxs)("p",{children:["Rotation period: ",this.rotation_period," hours"]}),Object(b.jsxs)("p",{children:["Orbital period: ",this.orbital_period," days"]}),Object(b.jsxs)("p",{children:["Gravity: ",this.gravity," Gs"]}),Object(b.jsxs)("p",{children:["Population: ",this.population]}),Object(b.jsxs)("p",{children:["Climate: ",this.climate]}),Object(b.jsxs)("p",{children:["Surface water: ",this.surface_water,"%"]})]})}}]),e}(),P=function(){function e(t){Object(_.a)(this,e),this.type="species",t&&Object.assign(this,t)}return Object(y.a)(e,[{key:"shortInfo",value:function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:this.name}),Object(b.jsxs)("p",{children:["Classification: ",this.classification]}),Object(b.jsxs)("p",{children:["Designation: ",this.designation]})]})}},{key:"detailedInfo",value:function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:this.name}),Object(b.jsxs)("p",{children:["Classification: ",this.classification]}),Object(b.jsxs)("p",{children:["Designation: ",this.designation]}),Object(b.jsxs)("p",{children:["Average height: ",this.average_height," cm"]}),Object(b.jsxs)("p",{children:["Average lifespan: ",this.average_lifespan," years"]}),Object(b.jsxs)("p",{children:["Eye colors: ",this.eye_colors]}),Object(b.jsxs)("p",{children:["Hair colors: ",this.hair_colors]}),Object(b.jsxs)("p",{children:["Skin color: ",this.skin_color]}),Object(b.jsxs)("p",{children:["Language: ",this.language]})]})}}]),e}(),C=function(){function e(t){Object(_.a)(this,e),this.type="Starships",t&&Object.assign(this,t)}return Object(y.a)(e,[{key:"shortInfo",value:function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:this.name}),Object(b.jsxs)("p",{children:["Model: ",this.model]}),Object(b.jsxs)("p",{children:["Starship class: ",this.starship_class]}),Object(b.jsxs)("p",{children:["Manufacturer: ",this.manufacturer]}),Object(b.jsxs)("p",{children:["Cost in credits: ",this.cost_in_credits]})]})}},{key:"detailedInfo",value:function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:this.name}),Object(b.jsxs)("p",{children:["Model: ",this.model]}),Object(b.jsxs)("p",{children:["Starship class: ",this.starship_class]}),Object(b.jsxs)("p",{children:["Manufacturer: ",this.manufacturer]}),Object(b.jsxs)("p",{children:["Cost in credits: ",this.cost_in_credits]}),Object(b.jsxs)("p",{children:["Length: ",this.length," m"]}),Object(b.jsxs)("p",{children:["Passengers: ",this.passengers]}),Object(b.jsxs)("p",{children:["Max atmosphering speed: ",this.max_atmosphering_speed]}),Object(b.jsxs)("p",{children:["Language: ",this.language]}),Object(b.jsxs)("p",{children:["Crew: ",this.crew]}),Object(b.jsxs)("p",{children:["Hyperdrive rating: ",this.hyperdrive_rating]}),Object(b.jsxs)("p",{children:["MGLT: ",this.MGLT]}),Object(b.jsxs)("p",{children:["Cargo capacity: ",this.cargo_capacity]}),Object(b.jsxs)("p",{children:["Consumables: ",this.consumables]})]})}}]),e}(),I=function(){function e(t){Object(_.a)(this,e),this.type="vehicles",t&&Object.assign(this,t)}return Object(y.a)(e,[{key:"shortInfo",value:function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:this.name}),Object(b.jsxs)("p",{children:["Model: ",this.model]}),Object(b.jsxs)("p",{children:["Vehicle class: ",this.vehicle_class]}),Object(b.jsxs)("p",{children:["Manufacturer: ",this.manufacturer]}),Object(b.jsxs)("p",{children:["Cost in credits: ",this.cost_in_credits," years"]})]})}},{key:"detailedInfo",value:function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:this.name}),Object(b.jsxs)("p",{children:["Model: ",this.model]}),Object(b.jsxs)("p",{children:["Vehicle class: ",this.vehicle_class]}),Object(b.jsxs)("p",{children:["Manufacturer: ",this.manufacturer]}),Object(b.jsxs)("p",{children:["Cost in credits: ",this.cost_in_credits," years"]}),Object(b.jsxs)("p",{children:["Crew: ",this.crew]}),Object(b.jsxs)("p",{children:["Length: ",this.length," m"]}),Object(b.jsxs)("p",{children:["Passengers: ",this.passengers]}),Object(b.jsxs)("p",{children:["Max atmosphering speed: ",this.max_atmosphering_speed]}),Object(b.jsxs)("p",{children:["MGLT: ",this.MGLT]}),Object(b.jsxs)("p",{children:["Cargo capacity: ",this.cargo_capacity]}),Object(b.jsxs)("p",{children:["Consumables: ",this.consumables]})]})}}]),e}(),w=[{type:"films",title:"Films"},{type:"people",title:"People"},{type:"planets",title:"Planets"},{type:"species",title:"Species"},{type:"vehicles",title:"Vehicle"},{type:"starships",title:"Starships"}],M="https://swapi.dev/api",F=Object(i.createContext)({navs:w,apiUrl:M,favorites:{},isFavorite:function(e){},addToFavorites:function(e){},removeFromFavorites:function(e){},favoritesCount:0,dataToObj:function(e){},fetchSWAPI:function(e){},selectedItem:void 0,closeModal:function(){},openModal:function(e){}}),L="sw-favorite-";function W(e){var t=Object(h.useState)({}),s=Object(j.a)(t,2),i=s[0],c=s[1],n=Object(h.useState)(void 0),r=Object(j.a)(n,2),a=r[0],o=r[1];Object(h.useEffect)((function(){Object.keys(localStorage).forEach((function(e){try{if(e.startsWith(L)){var t=JSON.parse(localStorage.getItem(e));t.id&&t.type&&t.name&&c((function(e){var s=p(t);return s&&(e[t.id]=s),Object(l.a)({},e)}))}}catch(s){console.log("Get favorites error:",s)}}))}),[]);var d={navs:w,apiUrl:M,favorites:i,isFavorite:function(e){return i.hasOwnProperty(e.id)},addToFavorites:function(e){if(!e.id)return;try{c((function(t){return t[e.id]=e,Object(l.a)({},t)})),localStorage.setItem(L+e.id,JSON.stringify(e))}catch(t){console.log("Save favorite error:",t)}},removeFromFavorites:function(e){if(!e.id)return;c((function(t){return delete t[e.id],Object(l.a)({},t)})),localStorage.removeItem(L+e.id)},favoritesCount:Object.keys(i).length,dataToObj:p,fetchSWAPI:function(e){return new Promise((function(t,s){fetch(e).then((function(e){if(e.ok)t(e.json());else{var i=e.statusText?e.statusText:"Something went wrong, please try again later.";s(i)}}))}))},selectedItem:a,closeModal:u,openModal:function(e){o(e)}};function u(){o(void 0)}function p(e){for(var t in e)if(e[t]="n/a"==(s=e[t])||"unknown"==s?"":s,("name"==t||"title"==t)&&!e[t])return!1;var s;switch(e.url&&e.url.startsWith(M)&&(e.id=e.url.substr(M.length+1),e.type=e.id.split("/")[0]),e.type){case"films":return new k(e);case"people":return new S(e);case"planets":return new N(e);case"species":return new P(e);case"starships":return new C(e);case"vehicles":return new I(e);default:return!1}}return Object(b.jsxs)(F.Provider,{value:d,children:[e.children,a&&Object(b.jsx)(g,{itemType:a.type,item:a,closeModal:u})]})}var T=F,E=s(17),D=s.n(E),A=function(){var e=Object(i.useContext)(T);return Object(b.jsx)(p,{children:Object(b.jsxs)("div",{className:D.a.navigation,children:[Object(b.jsx)("h1",{children:Object(b.jsx)(o.b,{className:"yellow",to:"/",children:"Star Wars"})}),Object(b.jsxs)("div",{className:D.a.menu,children:[e.navs.map((function(e,t){return Object(b.jsx)(o.b,{className:D.a.link+" yellow",to:"/"+e.type,children:e.title},t)})),e.favoritesCount>0&&Object(b.jsxs)(o.b,{className:D.a.link+" yellow",to:"/favorites",children:["Favorites (",e.favoritesCount,")"]})]})]})})},G=s(25),U=s.n(G),R=function(e){return Object(b.jsxs)("div",{className:U.a.main+" background-primary",children:[Object(b.jsx)(A,{}),Object(b.jsx)("div",{className:U.a.container,children:e.children})]})},V=s(31),B=s.n(V),z=function(){return Object(b.jsxs)("div",{className:B.a.main+" background-secondary",children:[Object(b.jsx)("h2",{children:"Welcome to the Star Wars website!"}),Object(b.jsx)("p",{children:"We have all Star Wars data you've ever wanted:"}),Object(b.jsxs)("p",{children:[Object(b.jsx)(o.b,{to:"/planets",children:"Planets"}),", ",Object(b.jsx)(o.b,{to:"/starships",children:"Spaceships"}),", ",Object(b.jsx)(o.b,{to:"/vehicles",children:"Vehicles"}),", ",Object(b.jsx)(o.b,{to:"/people",children:"People"}),", ",Object(b.jsx)(o.b,{to:"/films",children:"Films"})," and ",Object(b.jsx)(o.b,{to:"/species",children:"species"})]}),Object(b.jsx)("p",{children:"From all SEVEN Star Wars films"})]})},H=s(14),J=s.n(H),Z=function(e){var t=[];e.currPage>1&&t.push({num:e.currPage-1,classes:J.a.pageItem,text:"<<"});for(var s=1;s<=e.totalPages;s++){var i=J.a.pageItem;s==e.currPage&&(i+=" "+J.a.active),t.push({num:s,classes:i,text:s})}return e.currPage<e.totalPages&&t.push({num:e.currPage+1,classes:J.a.pageItem,text:">>"}),Object(b.jsx)("div",{className:J.a.pagination,children:t.map((function(t){return Object(b.jsx)("div",{className:t.classes+" background-secondary yellow",children:Object(b.jsx)(o.b,{to:"/"+e.listUrl+"/"+t.num,children:t.text})},t.text)}))})},K=s(32),X=s.n(K),Y=function(e){var t=Object(i.useContext)(T);return Object(b.jsxs)(p,{children:[e.item.shortInfo(),Object(b.jsxs)("div",{className:X.a.action,children:[Object(b.jsx)("button",{className:"btn btn-primary",onClick:function(){return t.openModal(e.item)},children:"Show more info"}),t.isFavorite(e.item)?Object(b.jsx)("button",{className:"removeFavorite btn btn-primary",onClick:function(){return t.removeFromFavorites(e.item)},children:"Remove from favorites"}):Object(b.jsx)("button",{className:"addFavorite btn btn-primary",onClick:function(){return t.addToFavorites(e.item)},children:"Add to favorites"})]})]})},q=s(15),Q=s.n(q),$=function(e){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{className:Q.a.pageTitle,children:e.title}),Object(b.jsx)("div",{children:Object(b.jsx)("input",{className:Q.a.searchBar+" background-secondary",type:"text",placeholder:"Search",value:e.searchWord,onChange:function(t){e.setSearchWord(t.target.value)}})}),0==e.list.length?Object(b.jsx)("div",{className:Q.a.noResult,children:Object(b.jsx)("p",{children:"No result found"})}):Object(b.jsx)("div",{className:Q.a.list,children:e.list.map((function(e,t){return Object(b.jsx)("div",{className:Q.a.listItem,children:Object(b.jsx)(Y,{itemType:e.type,item:e})},t)}))}),e.totalPages>1&&Object(b.jsx)(Z,{currPage:e.currPage,totalPages:e.totalPages,listUrl:e.baseUrl})]})},ee=function(){var e=Object(i.useContext)(T);function t(e){x(e),_(1)}var s=Object(a.f)().page,c=Object(i.useState)(e.favoritesCount<=10?1:Math.ceil(e.favoritesCount/10)),n=Object(j.a)(c,2),r=n[0],o=n[1];Object(i.useEffect)((function(){(s=isNaN(+s)||+s<1?1:+s)>=r&&(s=r),s!=g&&_(s)}),[s,r]);var l=Object(i.useState)([]),h=Object(j.a)(l,2),d=h[0],u=h[1],p=Object(i.useState)(""),O=Object(j.a)(p,2),f=O[0],x=O[1],v=Object(i.useState)(s),m=Object(j.a)(v,2),g=m[0],_=m[1];return Object(i.useEffect)((function(){g>r&&_(r);var t=Object.values(e.favorites).filter((function(e){return""==f||e.name.toLowerCase().includes(f.toLowerCase())})),s=10*(g-1);u(t.slice(s,s+10)),o(t.length<=10?1:Math.ceil(t.length/10))}),[f,g,e.favorites]),Object(b.jsx)($,{baseUrl:"favorites",list:d,totalPages:r,searchWord:f,currPage:g,title:"Favorites",setSearchWord:function(e){return t(e)}})},te=s(33),se=s(26),ie=s.n(se),ce=function(){return Object(b.jsx)("div",{className:ie.a.loader,children:Object(b.jsx)("div",{className:ie.a.spinner})})},ne=s(34),re=s.n(ne),ae=function(e){var t=Object(i.useContext)(T);function s(e){y(e),P(1)}var c=Object(a.f)().page;c=isNaN(+c)||+c<1?1:+c;var n=Object(i.useState)(!0),r=Object(j.a)(n,2),o=r[0],l=r[1],h=Object(i.useState)([]),d=Object(j.a)(h,2),u=d[0],p=d[1],O=Object(i.useState)(1),f=Object(j.a)(O,2),x=f[0],v=f[1],m=Object(i.useState)(""),g=Object(j.a)(m,2),_=g[0],y=g[1],k=Object(i.useState)(c),S=Object(j.a)(k,2),N=S[0],P=S[1],C=Object(i.useState)(""),I=Object(j.a)(C,2),w=I[0],M=I[1];return Object(i.useEffect)((function(){N!=c&&c<=x&&P(c)}),[c]),Object(i.useEffect)((function(){var s="".concat(t.apiUrl,"/").concat(e.type,"?page=").concat(N);_&&(s+="&search=".concat(_)),t.fetchSWAPI(s).then((function(e){var s,i=isNaN(+e.count)&&+e.count<1?1:Math.ceil(+e.count/10),c=[],n=Object(te.a)(e.results);try{for(n.s();!(s=n.n()).done;){var r=s.value,a=t.dataToObj(r);a&&c.push(a)}}catch(o){n.e(o)}finally{n.f()}p(c),l(!1),v(i),M("")})).catch((function(e){M(e),console.log("fetch(".concat(s,") error:"),e)}))}),[e.type,N,_]),""!=w?Object(b.jsx)("div",{className:re.a.error,children:w}):o?Object(b.jsx)(ce,{}):Object(b.jsx)($,{baseUrl:e.type,list:u,totalPages:x,searchWord:_,currPage:N,title:e.title,setSearchWord:function(e){return s(e)}})};var oe=function(){var e=Object(i.useContext)(T);return Object(b.jsx)(R,{children:Object(b.jsxs)(a.c,{children:[Object(b.jsx)(a.a,{path:"/",exact:!0,children:Object(b.jsx)(z,{})}),e.navs.map((function(e){return Object(b.jsx)(a.a,{path:"/"+e.type+"/:page?",children:Object(b.jsx)(ae,{type:e.type,title:e.title})},e.type)})),Object(b.jsx)(a.a,{path:"/favorites/:page?",children:Object(b.jsx)(ee,{})})]})})};r.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(W,{children:Object(b.jsx)(o.a,{children:Object(b.jsx)(oe,{})})})}),document.getElementById("root"))}],[[47,1,2]]]);
//# sourceMappingURL=main.c44189f9.chunk.js.map